\chapter{Popis problému, specifikace cíle}

% \begin{itemize}
% \item Popis øešeného problému, vymezení cílù DP/BP a~poadavkù na implementovanı systém.
% \item Popis struktury DP/BP ve vztahu k~vytyèenım cílùm.
% \item Rešeršní zpracování existujících implementací, pokud jsou známy.
% \end{itemize}

Virtuální sí musí podporovat nìkolik k~sobì pøipojenıch poèítaèù (Linux nebo Cisco, viz Vymezení spolupráce, kapitola \ref{vymezeni}). Limit pøipojenıch poèítaèù není v~zadání urèen, nicménì se poèítá s~tím, e systém bez problému zvládne pár desítek poèítaèù (viz Zátìové testy \ref{zatezove_testy}), aèkoliv v~praxi jich vìtšinou nebude potøeba více ne deset. Systém musí umoit konfiguraci rozhraní potøebnıch pro propojení sítì vèetnì pøíkazù pro aktivaci a deaktivaci rozhraní. Dále aplikace musí umonit správu smìrovací tabulky pomocí pøíkazù Cisco IOS. V~pøedmìtu Poèítaèové sítì se té po studentech poaduje, aby rozumìli pøekladu adres neboli tzv. \uv{natování} - NAT\footnote{Network Address Translation}. Cisco podporuje hned nìkolik druhù pøekladu adres. Pro tuto aplikaci je potøeba implementovat tøi zpùsoby, které se zkoušely na cvièeních: statickı pøeklad, dynamickı pøeklad a dynamickı pøeklad s~metodou overloading. Dále systém musí bıt schopen naèíst a posléze zase uloit celou konfiguraci do souboru. Funkènost celého øešení musí bıt ovìøitelná pøíkazy ping a traceroute.

% Navrhnìte a~implementujte aplikaci, která umoní vytvoøení virtuální poèítaèové sítì, pro potøeby pøedmìtu Y36PSI. Na
% systém se bude mono pøipojit s~pomocí telnetu. Z~pohledu uivatele se bude systém tváøit jako reálná sí. Zamìøte se
% pøedevším na konfiguraci systému Cisco. Systém bude podporovat pøíkazy potøebné ke konfiguraci síovıch rozhraní,
% smìrování a~pøekladu adres. Pro ovìøení správnosti konfigurace implementujte pøíkaz ping a~traceroute.
\section{Shrnutí funkèních poadavkù}
\begin{enumerate}
 \item Systém musí umonit vytvoøení poèítaèové sítì zaloené na smìrovaèích firmy Cisco Systems.
 \item Systém musí umonit konfiguraci rozhraní.
 \item Systém musí obsahovat funkèní smìrování.
 \item Systém musí implementovat pøeklad adres.
 \item Systém musí podporovat ukládání a naèítání do/ze souboru.
 \item Pro ovìøení správnosti musí bıt implementovány pøíkazy ping a traceroute.
 \item K~jednotlivım poèítaèùm aplikace musí bıt umonìno pøipojení pomocí telnetu.
 \item Pomocí telnet klientù musí bıt moné nìkolikanásobné paralelní pøipojení k~jednomu poèítaèi najednou.

\end{enumerate}

%------------------------------------------------------------------------------

\section{Nefunkèní poadavky}
\begin{enumerate}
 \item Aplikace musí bıt multiplatformní - alespoò pro OS\footnote{Operating System, èesky operaèní systém} Windows a Linux
 \item Aplikace musí bıt spustitelná na bìném\footnote{Slovem \uv{bìné} se myslí v~podstatì jakıkoliv poèítaè, na kterém je moné nainstalovat prostøedí Javy - Java Runtime Environment.} studentském poèítaèi.
 \item Systém by mìl bıt co nejvìrnìjší kopií reálného Cisca v~mezích zadání.
\end{enumerate}

%------------------------------------------------------------------------------

\section{Vymezení spolupráce} \label{vymezeni}
% Tady bude napsáno, co kdo udìlal, jak jsme to uvaøili - RT a já na to Wrapper, routovani - metody PC, já NAT, nacitani
Jak jsem naznaèil v~kapitole \ref{uvod}, práce je rozdìlena na dvì samostatné bakaláøské práce. Rozdìlení dle typu poèítaèù na Linux a Cisco se ukázalo jako správná volba, nicménì bylo potøeba doladit nìkolik specifik. Hned po zapoèetí práce jsem zjistil, e v~urèitıch èástech budu muset více spolupracovat s~kolegou, protoe se tıkají obou našich implementací. Napøíklad smìrovací tabulka na Linuxu a Ciscu se chová témìø stejnì, dokonce se podle ní i stejnì smìruje. Celé to má ale malı háèek: Cisco má tabulky dvì. První je tvoøena pøíkazy, které zadal uivatel, a~druhá je vypoèítávána z~tabulky první. Já jsem tedy pouil smìrovací tabulku od kolegy, která byla primárnì programována pro Linux, a tu jsem zaobalil do tzv. wrapperu, kterı ji ovládá a sám pøidává funkcionalitu tabulky druhé. 

Smìrování probíhá stejnì na obou systémech, liší se však pravidla pro pøíjem paketù. Já jsem tedy pouze navázal na kolegovu implementaci tím, e jsem pøidal metodu pro pøíjem paketù ( detailnìjší popis v~kapitole Smìrování \ref{prijmiEthernetove}). Abstraktní základ pøíkazù \verb|ping| a \verb|traceroute| byl pøevzat od kolegy, stejnì tak vıpoèet statistik o doruèení paketu. Jeliko má Cisco pøeklad adres natolik robustní (rozsáhlé datové struktury), tak ho bylo moné pouít s~menšími úpravami\footnote{Staèilo pøidat nìkolik obslunıch metod.} pro linuxovı pøíkaz \verb|iptables|. 

Mojí prací bylo také naèítání a ukládání do souboru, startovací skripty pro server i klienty a uivatelská pøíruèka. Na datovıch strukturách pro jádro celého systému jsem musel spolupracovat s~kolegou, protoe struktury musejí odráet situaci na obou systémech. Ku~pøíkladu tøída zaštiující IP adresu je napùl mojí a kolegovou prací. U~takové tøídy je vlastnictví popsáno na úrovni jednotlivıch metod. U~ostatních tøíd je autorství uvedeno v~hlavièce. Dále komunikaèní èást je vısledkem spoleèné práce\footnote{Dle tehdejších pravidel jsme mohli programovací úlohy implementovat a odevzdávat ve dvojicích.} z~roku 2008, kdy jsme právì pro pøedmìt Poèítaèové sítì programovali hru Karel.




